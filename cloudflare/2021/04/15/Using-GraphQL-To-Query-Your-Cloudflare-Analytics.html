<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Using GraphQL to Build My Own Cloudflare Analytics Page | Andrea Muttoni</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Using GraphQL to Build My Own Cloudflare Analytics Page" />
<meta name="author" content="Andrea Muttoni" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="CloudFlare has a nifty GraphQL API that lets you fetch analytics data older than the default 30 day window it shows in the dashboard. In this post I show you how to set it up, and fetch total requests and unique views." />
<meta property="og:description" content="CloudFlare has a nifty GraphQL API that lets you fetch analytics data older than the default 30 day window it shows in the dashboard. In this post I show you how to set it up, and fetch total requests and unique views." />
<link rel="canonical" href="https://muttoni.github.io/blog/cloudflare/2021/04/15/Using-GraphQL-To-Query-Your-Cloudflare-Analytics.html" />
<meta property="og:url" content="https://muttoni.github.io/blog/cloudflare/2021/04/15/Using-GraphQL-To-Query-Your-Cloudflare-Analytics.html" />
<meta property="og:site_name" content="Andrea Muttoni" />
<meta property="og:image" content="https://muttoni.github.io/blog/images/analytics.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-04-15T00:00:00-05:00" />
<script type="application/ld+json">
{"url":"https://muttoni.github.io/blog/cloudflare/2021/04/15/Using-GraphQL-To-Query-Your-Cloudflare-Analytics.html","@type":"BlogPosting","headline":"Using GraphQL to Build My Own Cloudflare Analytics Page","dateModified":"2021-04-15T00:00:00-05:00","datePublished":"2021-04-15T00:00:00-05:00","image":"https://muttoni.github.io/blog/images/analytics.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://muttoni.github.io/blog/cloudflare/2021/04/15/Using-GraphQL-To-Query-Your-Cloudflare-Analytics.html"},"author":{"@type":"Person","name":"Andrea Muttoni"},"description":"CloudFlare has a nifty GraphQL API that lets you fetch analytics data older than the default 30 day window it shows in the dashboard. In this post I show you how to set it up, and fetch total requests and unique views.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/blog/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://muttoni.github.io/blog/feed.xml" title="Andrea Muttoni" /><!-- the google_analytics_id gets auto inserted from the config file -->



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BLM1GZKCEL"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-BLM1GZKCEL');
</script>


<link rel="shortcut icon" type="image/x-icon" href="/blog/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/blog/">Andrea Muttoni</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/blog/about/">About Me</a><a class="page-link" href="/blog/search/">Search</a><a class="page-link" href="/blog/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Using GraphQL to Build My Own Cloudflare Analytics Page</h1><p class="page-description">CloudFlare has a nifty GraphQL API that lets you fetch analytics data older than the default 30 day window it shows in the dashboard. In this post I show you how to set it up, and fetch total requests and unique views.</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-04-15T00:00:00-05:00" itemprop="datePublished">
        Apr 15, 2021
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      4 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/blog/categories/#cloudflare">cloudflare</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>I’ve recently started a side project which has gotten more popular than I expected (~100k users). It’s also part of the reason I haven’t posted since January. While I won’t reveal what it is just yet, it did allow me to experiment with the <a href="https://jamstack.org/what-is-jamstack/">Jamstack</a> (which I’m really liking). The “JAM” in Jamstack stands for <strong>J</strong>avaScript, <strong>A</strong>PIs and <strong>M</strong>arkdown. It’s a way to architect an application so that it can be decoupled from a central server, pre-rendered and therefore hosted anywhere as a static site. With Jamstack, the entire front end is prebuilt into static pages and assets during a build process. The big upside to this architecture is that sites can be served directly from a CDN, without a backend server…at all!</p>

<h2 id="enter-cloudflare">Enter Cloudflare</h2>

<p>As a primary AWS user, I decided to try something different and use Cloudflare, having heard great things. The onboarding process was very easy, mainly centered around changing Name Servers. Once that was setup (and the obligatory 48 hour “DNS-related-lag-that-makes-you-doubt-your-config” lag passed), I was up and running with Cloudflare. I setup a simple page rule to cache everything and I was on my merry way.</p>

<h3 id="cloudflare-dashboard-analytics">Cloudflare Dashboard Analytics</h3>

<p>Now once great thing about Cloudflare, is that it gives you very simple analytics right from the dashboard (requests, views, cached data served, uncached data served, etc). This was great for the first couple months as I used it as a simple way to monitor traffic. Here’s what it looks like:</p>

<p><img src="/blog/images/analytics.png" alt="" /></p>

<p>Upon clicking on “View more analytics” Cloudflare gives you access to more fine-grained data, but I quickly realized after the first month after launch that I couldn’t extend the analytics window past 30 days, so I needed a way to query that data myself.</p>

<p>So I was only interested in two things:</p>

<ol>
  <li>Total Requests (aggregate &amp; daily)</li>
  <li>Views (aggregate &amp; daily)</li>
</ol>

<h2 id="cloudflare-analytics-graphql-api">Cloudflare Analytics GraphQL API</h2>

<p>At first, I thought I needed some <a href="https://www.cloudflare.com/en-gb/analytics/">paid subscription</a> or enterprise support of some sort. But I knew Cloudflare was a dev-friendly company so I kept digging. Eventually I found out they have a <a href="https://developers.cloudflare.com/analytics/graphql-api">GraphQL endpoint</a> dedicated to querying Analytics data.</p>

<p>So I whipped out <a href="https://www.electronjs.org/apps/graphiql">GraphiQL</a> and following their brilliant <a href="https://developers.cloudflare.com/analytics/graphql-api/getting-started">guide</a></p>

<h3 id="authentication">Authentication</h3>

<p>Authenticating is quite easy, all I needed to do was add two HTTP headers in the API requests, one of which was the <code class="language-plaintext highlighter-rouge">X-AUTH-EMAIL</code> header, with value set to your email. The other was the specially generated bearer <code class="language-plaintext highlighter-rouge">Authorization</code> token (or alternatively I also tried using my global API key via the <code class="language-plaintext highlighter-rouge">X-AUTH-KEY</code> header).</p>

<p><img src="https://developers.cloudflare.com/analytics/static/286f05e244d2ade1957a64edc06b5497/59822/GraphiQL-edit-http-headers-complete.png" alt="" title="An example HTTP header setup in GraphiQL" /></p>

<h3 id="querying-for-views-and-requests">Querying for Views and Requests</h3>

<p>Once I correctly authenticated, I pointed GraphiQL to <code class="language-plaintext highlighter-rouge">https://api.cloudflare.com/client/v4/graphql</code> and tried a couple of their example queries but none of them had the fields I was interested in: requests and views. So after a little look at their schema I wrote the following two queries. The first to give me a daily breakdown of views and requests, and the second to show a quick aggregate.</p>

<p>GraphiQL is really easy to setup and use. Here’s what it looks like once you setup your headers, and write your first query (yes, that’s my real data!). If you’re wondering what happened on the 16th of Feb, well the Reddit Hug-of-Life™ happened.</p>

<p><img src="/blog/images/daily-views.png" alt="" /></p>

<h4 id="daily-views--requests">Daily Views &amp; Requests</h4>

<div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">query</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">viewer</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">zones</span><span class="p">(</span><span class="n">filter</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">zoneTag</span><span class="p">:</span><span class="w"> </span><span class="s2">"801c28fc7...d90178b2"</span><span class="w"> </span><span class="p">})</span><span class="w">
  	</span><span class="p">{</span><span class="w">
      </span><span class="n">httpRequests1dGroups</span><span class="p">(</span><span class="w">
        </span><span class="n">filter</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="n">date_gt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-01"</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="n">orderBy</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">date_ASC</span><span class="p">]</span><span class="w">
        </span><span class="n">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="w">
      </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">dimensions</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="p">}</span><span class="w">
        </span><span class="n">sum</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="n">requests</span><span class="p">,</span><span class="w">
          </span><span class="n">pageViews</span><span class="p">,</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Which outputs:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"viewer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"zones"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"httpRequests1dGroups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"dimensions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-16"</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="nl">"sum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"pageViews"</span><span class="p">:</span><span class="w"> </span><span class="mi">49396</span><span class="p">,</span><span class="w">
                </span><span class="nl">"requests"</span><span class="p">:</span><span class="w"> </span><span class="mi">201875</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"dimensions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-17"</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="nl">"sum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"pageViews"</span><span class="p">:</span><span class="w"> </span><span class="mi">42540</span><span class="p">,</span><span class="w">
                </span><span class="nl">"requests"</span><span class="p">:</span><span class="w"> </span><span class="mi">175328</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="err">//</span><span class="w"> </span><span class="err">...</span><span class="w"> 
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"errors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h4 id="aggregated-views--requests">Aggregated Views &amp; Requests</h4>

<div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">query</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">viewer</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">zones</span><span class="p">(</span><span class="n">filter</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">zoneTag</span><span class="p">:</span><span class="w"> </span><span class="s2">"801c28fc7...d90178b2"</span><span class="w"> </span><span class="p">})</span><span class="w">
  	</span><span class="p">{</span><span class="w">
      </span><span class="n">httpRequests1dGroups</span><span class="p">(</span><span class="w">
        </span><span class="n">filter</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="n">date_gt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-01"</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="n">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="w">
      </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">sum</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="n">requests</span><span class="p">,</span><span class="w">
          </span><span class="n">pageViews</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Which outputs:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"viewer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"zones"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"httpRequests1dGroups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"sum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"pageViews"</span><span class="p">:</span><span class="w"> </span><span class="mi">356899</span><span class="p">,</span><span class="w">
                </span><span class="nl">"requests"</span><span class="p">:</span><span class="w"> </span><span class="mi">1329471</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"errors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>As you can see, both queries are almost identical except the second doesn’t have a <code class="language-plaintext highlighter-rouge">date</code> dimension and corresponding <code class="language-plaintext highlighter-rouge">orderBy</code> logic.</p>

<h2 id="conclusions">Conclusions</h2>

<p>What’s great about this setup is I have full control of what analytics data I see, and I can integrate both the query (via a simple fetch) as well as the output into a visual web dashboard and have a realtime view of how my website is doing.</p>

<p>For example:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">function</span> <span class="nx">fetchAPI</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">apiKey</span><span class="p">,</span> <span class="nx">zoneTag</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Request</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nx">query</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">query</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">...the stringified query here...</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">variables</span><span class="dl">"</span><span class="p">:{}}</span>

    <span class="kd">let</span> <span class="nx">init</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">request</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">x-auth-key</span><span class="dl">'</span><span class="p">,</span> <span class="nx">apiKey</span><span class="p">)</span>
    <span class="nx">request</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">x-auth-email</span><span class="dl">'</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span>

    <span class="k">return</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">init</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// More info if interested: </span>
<span class="c1">// https://developers.cloudflare.com/analytics/graphql-api/tutorials/build-your-own-analytics</span>
</code></pre></div></div>

<p>If you’re using Cloudflare, give it a go, and let me know if you build something cool!</p>

  </div><a class="u-url" href="/blog/cloudflare/2021/04/15/Using-GraphQL-To-Query-Your-Cloudflare-Analytics.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
    <data class="u-url" href="/blog/"></data>
    
    <div class="wrapper">
        <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/muttoni" title="muttoni"><svg class="svg-icon grey"><use xlink:href="/blog/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://www.linkedin.com/in/muttoni" title="muttoni"><svg class="svg-icon grey"><use xlink:href="/blog/assets/minima-social-icons.svg#linkedin"></use></svg></a></li><li><a rel="me" href="https://twitter.com/muttonia" title="muttonia"><svg class="svg-icon grey"><use xlink:href="/blog/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>
        <div class="footer-col-wrapper">
            <div class="footer-col">
                <p class="feed-subscribe"  style="text-align:center;">
                    <a href="/blog/feed.xml">
                        <svg class="svg-icon orange">
                            <use xlink:href="/blog/assets/minima-social-icons.svg#rss"></use>
                        </svg><span>Subscribe</span>
                    </a>
                </p>
            </div>
        </div>
        
    </div>
    
</footer></body>

</html>
